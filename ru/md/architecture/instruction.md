sidebar_position: 2

# 4.2 Набор инструкций матричного расширения

- [4.2.1 Обзор набора инструкций](#421-обзор-набора-инструкций)
- [4.2.2 Набор инструкций SpacemiT](#422-набор-инструкций-spacemit)
- [4.2.3 Базовое использование](#423-базовое-использование)

## 4.2.1 Обзор набора инструкций

Инструкции матричного расширения в первую очередь предназначены для ключевой операции в ИИ — умножения матриц. Общая форма умножения матриц:

C+ = A x B

где C — выходная матрица, A и B — входные матрицы. В зависимости от того, какие регистры используются для входных и выходных матриц, сообщество ***RISC-V*** разделяет матричное расширение на три подхода, как показано ниже: ![Сравнение трех вариантов инструкций](./images/matrix_inst.jpg)

- Подход IME: входные и выходные матрицы используют vector-регистры. Подробнее: [IME subgroup](https://lists.riscv.org/g/tech-integrated-matrix-extension).
- Подход VME: входные матрицы используют vector-регистры, выходные — отдельные расширенные регистры. Подробнее: [VME subgroup](https://lists.riscv.org/g/tech-vme).
- Подход AME: входные и выходные матрицы используют отдельные специализированные регистры. Подробнее: [AME subgroup](https://lists.riscv.org/g/tech-attached-matrix-extension).

## 4.2.2 Набор инструкций SpacemiT

Собственный набор инструкций матричного расширения SpacemiT основан на IME; [подробности здесь](https://github.com/spacemit-com/riscv-ime-extension-spec). В ядре K1 (vlen=256) форма матричного вычислительного блока такая:

4 x 8 x 4

Теоретическая производительность одного матричного блока:

2 x 4 x 8 x 4 x 2Ghz = 0.5TOPS

## 4.2.3 Базовое использование

Расширенный набор инструкций SpacemiT, основанный на IME, в целом следует программной модели стандартного vector-набора RISC-V. Использование стандартного vector-набора см. [здесь]().
Использование IME-инструкций см. в [репозитории примеров](https://github.com/spacemit-com/riscv-ime-extension-spec/tree/master/example)
